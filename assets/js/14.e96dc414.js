(window.webpackJsonp=window.webpackJsonp||[]).push([[14],{329:function(_,v,t){"use strict";t.r(v);var s=t(0),o=Object(s.a)({},(function(){var _=this,v=_._self._c;return v("ContentSlotsDistributor",{attrs:{"slot-key":_.$parent.slotKey}},[v("h1",{attrs:{id:"sql的执行顺序"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#sql的执行顺序"}},[_._v("#")]),_._v(" SQL的执行顺序")]),_._v(" "),v("blockquote",[v("p",[v("em",[_._v("很多人学SQL感觉学不透，在我看来，很大原因是没有把SQL的运行顺序搞懂！")])])]),_._v(" "),v("p",[_._v("先上结论：")]),_._v(" "),v("blockquote",[v("p",[v("strong",[_._v("SQL语句执行顺序：FROM、ON 、JOIN、WHERE、GROUP BY、AGG_FUNC、WITH、HAVING、SELECT、UNION、DISTINCT 、ORDER BY、LIMIT。")])])]),_._v(" "),v("p",[_._v("在实际执行过程中，每个步骤都会为下一个步骤生成一个虚拟表，这个虚拟表将作为下一个执行步骤的数据。")]),_._v(" "),v("p",[v("strong",[_._v("1、FROM")]),_._v("：选择FROM后面跟的表，产生虚拟表1。")]),_._v(" "),v("p",[v("strong",[_._v("2、ON")]),_._v("：ON是JOIN的连接条件，符合连接条件的行会被记录在虚拟表2中。")]),_._v(" "),v("p",[v("strong",[_._v("3、JOIN")]),_._v("：如果指定了LEFT JOIN，那么保留表中未匹配的行就会作为外部行添加到虚拟表2中，产生虚拟表3。如果有多个JOIN链接，会重复执行步骤1~3，直到处理完所有表。")]),_._v(" "),v("p",[v("strong",[_._v("4、WHERE")]),_._v("：对虚拟表3进行WHERE条件过滤，符合条件的记录会被插入到虚拟表4中。")]),_._v(" "),v("p",[v("strong",[_._v("5、GROUP BY")]),_._v("：根据GROUP BY子句中的列，对虚拟表4中的记录进行分组操作，产生虚拟表5。")]),_._v(" "),v("p",[_._v("​      在之前的mysql中group by的结果当有多条记录时不可以与select * 连用，但是目前的版本会自动去重，取查出来的首条数据进行展示，但是当你有了聚合函数时，groupby就会正常，可以把group by看作隐藏行，而不是去掉行，这一点要搞清楚。")]),_._v(" "),v("p",[v("strong",[_._v("6、AGG_FUNC")]),_._v("：常用的 Aggregate 函数包涵以下几种：（AVG：返回平均值）、（COUNT：返回行数）、（FIRST：返回第一个记录的值）、（LAST：返回最后一个记录的值）、（MAX： 返回最大值）、（MIN：返回最小值）、（SUM： 返回总和）。")]),_._v(" "),v("p",[v("strong",[_._v("7、WITH")]),_._v(" 对虚拟表5应用ROLLUP或CUBE选项，生成虚拟表 6。")]),_._v(" "),v("p",[v("strong",[_._v("8、HAVING")]),_._v("：对虚拟表6进行HAVING过滤，符合条件的记录会被插入到虚拟表7中。")]),_._v(" "),v("p",[v("strong",[_._v("9、SELECT")]),_._v("：SELECT到一步才执行，选择指定的列，插入到虚拟表8中。")]),_._v(" "),v("p",[v("strong",[_._v("10、UNION")]),_._v("：UNION连接的两个SELECT查询语句，会重复执行步骤1~9，产生两个虚拟表9，UNION会将这些记录合并到虚拟表10中。")]),_._v(" "),v("p",[v("strong",[_._v("11、DISTINCT")]),_._v(" 将重复的行从虚拟表10中移除，产生虚拟表 11。DISTINCT用来删除重复行，只保留唯一的。")]),_._v(" "),v("p",[v("strong",[_._v("12、ORDER BY")]),_._v(": 将虚拟表11中的记录进行排序，虚拟表12。")]),_._v(" "),v("p",[v("strong",[_._v("13、LIMIT")]),_._v("：取出指定行的记录，返回结果集。")]),_._v(" "),v("p",[_._v("有时间给大家举例详细分析一下。")])])}),[],!1,null,null,null);v.default=o.exports}}]);